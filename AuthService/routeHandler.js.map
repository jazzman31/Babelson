{"version":3,"sources":["routeHandler.es6"],"names":[],"mappings":";;;;;QAAgB,YAAY,GAAZ,YAAY;;AAArB,SAAS,YAAY,CAAC,kBAAkB,EAAE,eAAe,EAAE;AAC9D,mBAAe,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE;AACrC,0BAAkB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,UAAC,OAAO,EAAE,QAAQ,EAAI;AACpE,gBAAI,eAAe,GAAG,IAAI,KAAK,CAAC,iBAAiB,CAAC,EAAE,CAAC;AACrD,gBAAI,YAAY,GAAG,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC3D,gBAAI,eAAe,GAAG,KAAK,CAAC,iBAAiB,CAAC,IAAI,QAAQ,CAAC;AAC3D,gBAAI,aAAa,GAAG,KAAK,CAAC,eAAe,CAAC,CAAC;;AAE3C,2BAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE,CAAC,CAC5D,IAAI,CAAC,UAAC,MAAM,EAAK;AACd,uBAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC;AAC7C,oBAAI,MAAM,GAAG,MAAM,CAAC;AACpB,oBAAI,aAAa,EAAE;AACf,wBAAI,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE;AACrD,8BAAM,GAAG,IAAI,aAAa,CAAC;AACvB,mCAAO,EAAE,IAAI;AACb,gCAAI,EAAE,MAAM,CAAC,MAAM,EAAE;yBACxB,CAAC,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC;qBACpB;iBACJ;;AAED,wBAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACzB,CAAC,SACI,CAAC,UAAC,QAAQ,EAAI;AAChB,uBAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC;AAC/C,wBAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC3B,CAAC,CAAC;SACV,CAAC,CAAC;KACN,CAAC,CAAA;CACL","file":"routeHandler.js","sourcesContent":["export function routeHandler(expressAppInstance, routeCollection) {\n    routeCollection.forEach(function (route) {\n        expressAppInstance[route['method']](route['url'], (request, response)=> {\n            var controllerClass = new route['controllerClass']();\n            var requestModel = new route['requestModel'](request.body);\n            var parsingFunction = route['parsingFunction'] || 'toJSON';\n            var responseModel = route['responseModel'];\n\n            controllerClass[route['action']](requestModel[parsingFunction]())\n                .then((retVal) => {\n                    console.log('then for response is ', retVal);\n                    var result = retVal;\n                    if (responseModel) {\n                        if (result.constructor.name.indexOf('Collection') != -1) {\n                            result = new responseModel({\n                                success: true,\n                                data: result.toJSON()\n                            }).toJSON().data;\n                        }\n                    }\n\n                    response.json(result);\n                })\n                .catch((onReject)=> {\n                    console.log('fail for response is ', onReject);\n                    response.json(onReject);\n                });\n        });\n    })\n}\n"]}